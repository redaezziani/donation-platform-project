from app.db.database import SessionLocal
from app.db.models import User, Campaign, CampaignStatus
from sqlalchemy.exc import NoResultFound
from datetime import datetime, timedelta

def get_or_create_default_user(db):
    user = db.query(User).filter_by(email="demo@donation.com").first()
    if not user:
        user = User(
            email="demo@donation.com",
            username="demo_user",
            hashed_password="notahash",
            full_name="Demo User"
        )
        db.add(user)
        db.commit()
        db.refresh(user)
    return user

def seed_campaigns():
    db = SessionLocal()
    user = get_or_create_default_user(db)

    db.query(Campaign).delete()
    db.commit()

    campaigns = [
        Campaign(
            title="ุญููุฉ ุจูุงุก ุขุจุงุฑ ูุชูููุฑ ููุงู ุดุฑุจ ูููุฉ ูุขููุฉ ูู ุงููุฌุชูุนุงุช ุงูุฑูููุฉ ุงููุญุฑููุฉ",
            description=(
                "ูู ุงูุนุฏูุฏ ูู ุงููุฑู ุงููุงุฆูุฉุ ูุณูุฑ ุงูุฃุทูุงู ูุงููุณุงุก ูุฃูุซุฑ ูู 5 ูููููุชุฑุงุช ูููููุง ูุฌูุจ ููุงู ุบุงูุจูุง ูุง ุชููู ูููุซุฉ. "
                "ูุฐู ุงูุญููุฉ ุชุณุนู ูุจูุงุก ุขุจุงุฑ ููุงู ุนูููุฉ ูุขููุฉ ุจุงุณุชุฎุฏุงู ุชูููุงุช ุชูููุฉ ุญุฏูุซุฉ. "
                "ูุณุนู ูุชูููุฑ ูุตุฏุฑ ูุงุก ูุณุชุฏุงู ูุบูุฑ ุญูุงุฉ ูุฆุงุช ุงูุนุงุฆูุงุช ููุญุฏู ูู ุงูุชุดุงุฑ ุงูุฃูุฑุงุถ. "
                "ูุน ูู ุชุจุฑุนุ ุชูุชุฑุจ ูุฑูุฉ ุฌุฏูุฏุฉ ูู ุงูุฃูู ูุงูุญูุงุฉ ุงููุฑููุฉ. "
                "ููููู ูุญู ุงูุณุจุจ ูู ุชุบููุฑ ูุฐุง ุงููุงูุน ุงููุงุณู."
            ),
            markdown_text="""
# ๐ฆ ุญููุฉ ุชูููุฑ ููุงู ุดุฑุจ ูููุฉ

ูู ูุซูุฑ ูู ุงููุฑู ุงููููุฑุฉุ ุชุนุชุจุฑ ุงูููุงู ุงููุธููุฉ ุญูููุง ุจุนูุฏ ุงูููุงู. 

> ุจุฏูู ุงููุงุกุ ูุง ุญูุงุฉ.

## ููุงุฐุง ูุฏุนู ูุฐู ุงูุญููุฉุ
- **ุฃูุซุฑ ูู 2 ูููุงุฑ ุดุฎุต** ุญูู ุงูุนุงูู ููุชูุฑูู ุฅูู ููุงู ูุธููุฉ.
- ุงูุฃูุฑุงุถ ุงููุงุชุฌุฉ ุนู ุงูููุงู ุงููููุซุฉ ุชูุชู ุขูุงู ุงูุฃุทูุงู ูู ุนุงู.
- ูุดุงุฑูุน ุงูุขุจุงุฑ ูููููุง ุชุบููุฑ ูุณุชูุจู ูุฑูุฉ ูุงููุฉ.

## ุฃูุฏุงููุง:
- ุญูุฑ 5 ุขุจุงุฑ ุนูููุฉ ูุฌูุฒุฉ ุจุชูููุงุช ุชูููุฉ ุงูููุงู.
- ุชุบุทูุฉ ุงุญุชูุงุฌุงุช **2000 ูุฑุฏ ูููููุง**.
- ุชุฏุฑูุจ ุณูุงู ุงููุฑู ุนูู ุฅุฏุงุฑุฉ ูุตูุงูุฉ ุงูุขุจุงุฑ.

๐ **ูู ุชุจุฑุน ููุญุฏุซ ูุฑููุง.**  
ุดุงุฑููุง ูู ุฒุฑุน ุงูุฃููุ ุจูุทุฑุฉ ูุงุก.
""",
            target_amount=20000.0,
            current_amount=3000.0,
            start_date=datetime.utcnow() - timedelta(days=12),
            end_date=datetime.utcnow() + timedelta(days=60),
            status=CampaignStatus.ACTIVE,
            image_path="uploads/campaigns/water-campaign.jpg",
            creator_id=user.id
        ),
        Campaign(
            title="ุจุฑูุงูุฌ ุดุงูู ูุฏุนู ุชุนููู ุงูุฃุทูุงู ุงูุฃูุชุงู ูุชูููููู ูู ูุณุชูุจู ุฃูุถู",
            description=(
                "ูุชุนุฑุถ ุงูุฃูุชุงู ูู ุงููุฌุชูุนุงุช ุงููููุฑุฉ ููุญุฑูุงู ูู ุงูุชุนููู ุจุณุจุจ ุบูุงุจ ุงููุนูู ูุงูุนุฏุงู ุงูููุงุฑุฏ. "
                "ุชูุฏู ูุฐู ุงูุญููุฉ ุฅูู ุชูููุฑ ุจูุฆุฉ ุชุนููููุฉ ูุงููุฉ ุชุดูู ุงูุฑุณูู ุงููุฏุฑุณูุฉุ ุงูููุงุฒูุ ูุงูุฏุนู ุงูููุณู. "
                "ูุญู ูุคูู ุฃู ุงูุชุนููู ูู ุฃููู ุณูุงุญ ููุญุงุฑุจุฉ ุงูููุฑ ููุณุฑ ุงูุญูุงุฌุฒ. "
                "ูู ูุณุงููุฉ ูู ุงุณุชุซูุงุฑ ูู ุฌูู ุฌุฏูุฏ ูุงุฏุฑ ุนูู ุจูุงุก ุงููุณุชูุจู. "
                "ููููุญ ุงูุฃูู ููู ุญูุฑู ูู ุฃุจุณุท ุญูููู."
            ),
            markdown_text="""
# ๐ ุญููุฉ ุชุนููู ุงูุฃูุชุงู

ุงูุฃุทูุงู ุงูุฃูุชุงู ุบุงูุจูุง ูุง ููุงุฌููู ุงูุชูููุด ูุงูุญุฑูุงู ูู ุฃุจุณุท ุญููููู.

> ุงูุชุนููู ูู ุงูุณุจูู ุงููุญูุฏ ููุณุฑ ุฏุงุฆุฑุฉ ุงูููุฑ.

## ูุงุฐุง ููุฏูุ
- **ุฑุณูู ูุฏุฑุณูุฉ** ูุงููุฉ ููุฃุทูุงู ุบูุฑ ุงููุงุฏุฑูู.
- **ููุงุฒู ูุฏุฑุณูุฉ**: ูุชุจุ ุฏูุงุชุฑุ ุญูุงุฆุจุ ุฃููุงู.
- **ุฏุนู ููุณู** ูุชุญููุฒ ุงูุงุณุชูุฑุงุฑ ุงูุนุงุทูู ูุงูููุณู.

## ูุณุชูุฏูุงุช ุงูุญููุฉ:
- ุชูููู ุชุนููู **100 ุทูู ูุชูู** ููุฏุฉ ุนุงู ูุงูู.
- ุฅูุงูุฉ ูุฑุด ุชูููุฉ ุจุดุฑูุฉ ูุชุฏุฑูุจูุฉ ูุชุนุฒูุฒ ููุงุฑุงุชูู.
- ุฅุดุฑุงู ุงููุฌุชูุน ุงููุญูู ูู ุนูููุฉ ุงูุชุนููู ูุงูุฑุนุงูุฉ.

โ๏ธ *ูู 10 ุฏุฑุงูู ูุฏ ุชุนูู ุจุฏุงูุฉ ุฌุฏูุฏุฉ ูุทูู ูุง ูููู ุฎูุงุฑูุง ุขุฎุฑ.*
""",
            target_amount=15000.0,
            current_amount=4500.0,
            start_date=datetime.utcnow() - timedelta(days=7),
            end_date=datetime.utcnow() + timedelta(days=35),
            status=CampaignStatus.ACTIVE,
            image_path="uploads/campaigns/orphan-education.jpg",
            creator_id=user.id
        ),
        Campaign(
            title="ุญููุฉ ุทุจูุฉ ุนุงุฌูุฉ ูุชูููุฑ ุงูุฃุฏููุฉ ูุงููุณุชูุฒูุงุช ุงูุตุญูุฉ ููุงุฌุฆูู ูู ุงููุฎููุงุช",
            description=(
                "ุงููุงุฌุฆูู ูู ุงููุฎููุงุช ููุชูุฑูู ูุฃุจุณุท ููููุงุช ุงูุญูุงุฉุ ูุฎุงุตุฉ ุงูุฑุนุงูุฉ ุงูุตุญูุฉ. "
                "ุชูุชูุฑ ุงููุฑุงูุฒ ุงูุตุญูุฉ ุงูููุฏุงููุฉ ููุฃุฏููุฉ ุงูุฃุณุงุณูุฉุ ูุง ููุฏุฏ ุญูุงุฉ ุงูุขูุงู. "
                "ุชูุฏู ูุฐู ุงูุญููุฉ ุฅูู ุชุฒููุฏ ุชูู ุงููุฑุงูุฒ ุจุงูุฃุฏููุฉ ูุงููุนุฏุงุช ุงูุทุจูุฉ ุงูุถุฑูุฑูุฉ. "
                "ูุญู ุจุญุงุฌุฉ ูุงุณุฉ ูุฏุนููู ูุฅููุงุฐ ุญูุงุฉ ูุงุฌุฆูู ูุง ูููููู ุฎูุงุฑูุง ุขุฎุฑ. "
                "ุณุงูู ูุนูุง ูุชููู ุนูููุง ูู ุณุงุนุฉ ุงูุนุฌุฒ."
            ),
            markdown_text="""
# ๐ฅ ูุณุงุนุฏุงุช ุทุจูุฉ ุนุงุฌูุฉ ููุงุฌุฆูู

ูู ูุฎููุงุช ุงููุงุฌุฆููุ ูููู ููุฒูุฉ ุจุฑุฏ ุฃู ุชุชุญูู ุฅูู ุชูุฏูุฏ ุญูููู ููุญูุงุฉ ุจุณุจุจ ููุต ุงูุฃุฏููุฉ.

## ููุงุฐุง ูุฐู ุงูุญููุฉ ุนุงุฌูุฉุ
- ุชูุดู ุฃูุฑุงุถ ุชููุณูุฉ ูุฌูุฏูุฉ ูู ูุฎููุงุช ููุชุธุฉ.
- ููุต ุญุงุฏ ูู ุงููุถุงุฏุงุช ุงูุญูููุฉ ูุฃุฏููุฉ ุงูุฃุทูุงู.
- ุนุฌุฒ ูู ุงููุณุชูุฒูุงุช ุงูุฃุณุงุณูุฉ ูุงูููุงุฒุงุช ูุงููุนููุงุช.

## ููู ูุณุงุนุฏุ
- **ุดุฑุงุก ุงูุฃุฏููุฉ ุงูุนุงุฌูุฉ** ูู ุงูููุฑุฏูู ุงููุญูููู.
- **ุชูุฒูุน ูุจุงุดุฑ** ูู ุงููุฎููุงุช ุจุงูุชุนุงูู ูุน ูุฑู ุทุจูุฉ.
- **ุฏุนู ุงููุณุชูุตูุงุช** ูุชุฌููุฒ ุบุฑู ุทูุงุฑุฆ.

๐ *ุณุงุนุฏูุง ูู ุฅููุงุฐ ุงูุฃุฑูุงุญ. ูู ุซุงููุฉ ูุฏ ุชููู ุญุงุณูุฉ.*
""",
            target_amount=30000.0,
            current_amount=11000.0,
            start_date=datetime.utcnow() - timedelta(days=20),
            end_date=datetime.utcnow() + timedelta(days=45),
            status=CampaignStatus.ACTIVE,
            image_path="uploads/campaigns/medical-aid.jpg",
            creator_id=user.id
        ),
    ]

    for campaign in campaigns:
        db.add(campaign)
    db.commit()
    print("Seeded campaigns successfully.")
    db.close()

if __name__ == "__main__":
    seed_campaigns()
